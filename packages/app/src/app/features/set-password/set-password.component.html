<div class="set-password-page">
    <div class="set-password-card">
        <h1>Set a Password</h1>
        <p class="subtitle">
            You signed in with a social account. Set a password so you can also log in with
            @if (profile()?.email; as email) {
                <strong>{{ email }}</strong> and
            }
            your password on devices that don't support social login (e.g. Android TV).
        </p>

        <form [formGroup]="form" (ngSubmit)="save()" class="set-password-form">
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>New password</mat-label>
                <input matInput type="password" formControlName="newPassword" autocomplete="new-password"/>
                @if (form.controls.newPassword.dirty && form.controls.newPassword.hasError('minlength')) {
                    <mat-error>Minimum 8 characters</mat-error>
                }
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Confirm password</mat-label>
                <input matInput type="password" formControlName="confirmPassword" autocomplete="new-password"/>
            </mat-form-field>

            @if (error()) {
                <p class="form-error" role="alert">{{ error() }}</p>
            }

            <div class="actions">
                <button mat-flat-button type="submit" [disabled]="form.invalid || saving()">
                    @if (saving()) {
                        <mat-spinner diameter="18" class="btn-spinner"/>
                    } @else {
                        Set Password
                    }
                </button>
                <a mat-button routerLink="/">Skip for now</a>
            </div>
        </form>
    </div>
</div>
